package valueobject

// è¿™ä¸ªæ–‡ä»¶å±•ç¤ºäº†ä¸‰ç§ä¸åŒåœºæ™¯ä¸‹æ˜µç§°çš„å¤„ç†æ–¹å¼

// ============================================================
// åœºæ™¯1ï¼šæ˜µç§°æœ‰æ ¼å¼é™åˆ¶ï¼ˆé•¿åº¦ã€å­—ç¬¦ç±»å‹ï¼‰
// âœ… åº”è¯¥å®šä¹‰æˆå€¼å¯¹è±¡
// ============================================================
//
// type Nickname struct {
//     value string
// }
//
// func NewNickname(value string) (Nickname, error) {
//     // éªŒè¯é•¿åº¦
//     if len(value) < 3 || len(value) > 16 {
//         return Nickname{}, errors.New("é•¿åº¦ä¸åˆæ³•")
//     }
//     // éªŒè¯å­—ç¬¦æ ¼å¼
//     if !nicknamePattern.MatchString(value) {
//         return Nickname{}, errors.New("æ ¼å¼ä¸åˆæ³•")
//     }
//     return Nickname{value: value}, nil
// }
//
// ä¸ºä»€ä¹ˆï¼Ÿå› ä¸ºè¿™äº›è§„åˆ™æ˜¯æ˜µç§°æœ¬èº«çš„å›ºæœ‰å±æ€§ï¼Œä¸ä¾èµ–å¤–éƒ¨çŠ¶æ€

// ============================================================
// åœºæ™¯2ï¼šæ˜µç§°æ²¡æœ‰æ ¼å¼é™åˆ¶ï¼Œåªéœ€è¦å”¯ä¸€æ€§
// âŒ ä¸åº”è¯¥å®šä¹‰æˆå€¼å¯¹è±¡
// âœ… ç›´æ¥ç”¨ stringï¼Œåœ¨é¢†åŸŸæœåŠ¡ä¸­éªŒè¯å”¯ä¸€æ€§
// ============================================================
//
// é”™è¯¯ç¤ºä¾‹ï¼ˆä¸è¦è¿™æ ·åšï¼‰ï¼š
// type Nickname struct {
//     value string
// }
//
// func NewNickname(value string, repo UserRepository) (Nickname, error) {
//     // âŒ é”™è¯¯ï¼šå€¼å¯¹è±¡ä¸åº”è¯¥ä¾èµ–ä»“å‚¨
//     exists, _ := repo.ExistsByNickname(value)
//     if exists {
//         return Nickname{}, errors.New("æ˜µç§°å·²å­˜åœ¨")
//     }
//     return Nickname{value: value}, nil
// }
//
// æ­£ç¡®ç¤ºä¾‹ï¼š
// ç›´æ¥ä½¿ç”¨ stringï¼Œåœ¨é¢†åŸŸæœåŠ¡æˆ–åº”ç”¨æœåŠ¡ä¸­éªŒè¯
//
// // domain/service/user_service.go
// type UserService struct {
//     userRepo UserRepository
// }
//
// func (s *UserService) CreateUser(nickname string, email string) (*User, error) {
//     // åœ¨é¢†åŸŸæœåŠ¡ä¸­éªŒè¯å”¯ä¸€æ€§
//     exists, err := s.userRepo.ExistsByNickname(nickname)
//     if err != nil {
//         return nil, err
//     }
//     if exists {
//         return nil, errors.New("æ˜µç§°å·²è¢«ä½¿ç”¨")
//     }
//
//     user := NewUser(nickname, email)
//     return user, s.userRepo.Save(user)
// }

// ============================================================
// åœºæ™¯3ï¼šæ˜µç§°æ—¢æœ‰æ ¼å¼é™åˆ¶ï¼Œåˆéœ€è¦å”¯ä¸€æ€§
// âœ… å€¼å¯¹è±¡è´Ÿè´£æ ¼å¼éªŒè¯ï¼Œé¢†åŸŸæœåŠ¡è´Ÿè´£å”¯ä¸€æ€§éªŒè¯
// ============================================================
//
// è¿™æ˜¯æœ€å¸¸è§çš„åœºæ™¯ï¼Œéœ€è¦åˆ†å±‚å¤„ç†ï¼š
//
// 1. å€¼å¯¹è±¡å±‚ï¼šéªŒè¯æ ¼å¼
// type Nickname struct {
//     value string
// }
//
// func NewNickname(value string) (Nickname, error) {
//     // åªéªŒè¯æ ¼å¼ï¼Œä¸éªŒè¯å”¯ä¸€æ€§
//     if len(value) < 3 || len(value) > 16 {
//         return Nickname{}, errors.New("é•¿åº¦ä¸åˆæ³•")
//     }
//     return Nickname{value: value}, nil
// }
//
// 2. é¢†åŸŸæœåŠ¡å±‚ï¼šéªŒè¯å”¯ä¸€æ€§
// type UserService struct {
//     userRepo UserRepository
// }
//
// func (s *UserService) CreateUser(nickname Nickname, email string) (*User, error) {
//     // å…ˆéªŒè¯æ ¼å¼ï¼ˆåœ¨åˆ›å»º Nickname æ—¶å·²å®Œæˆï¼‰
//     // å†éªŒè¯å”¯ä¸€æ€§
//     exists, err := s.userRepo.ExistsByNickname(nickname.Value())
//     if err != nil {
//         return nil, err
//     }
//     if exists {
//         return nil, errors.New("æ˜µç§°å·²è¢«ä½¿ç”¨")
//     }
//
//     user := NewUser(nickname, email)
//     return user, s.userRepo.Save(user)
// }

// ============================================================
// æ€»ç»“ï¼šä»€ä¹ˆæ—¶å€™å®šä¹‰å€¼å¯¹è±¡ï¼Ÿ
// ============================================================
//
// âœ… åº”è¯¥å®šä¹‰å€¼å¯¹è±¡çš„æƒ…å†µï¼š
// - æœ‰æ ¼å¼éªŒè¯è§„åˆ™ï¼ˆé•¿åº¦ã€å­—ç¬¦ç±»å‹ã€æ­£åˆ™åŒ¹é…ç­‰ï¼‰
// - æœ‰ä¸šåŠ¡è®¡ç®—é€»è¾‘ï¼ˆå¦‚ RecommendationReason çš„ Weight()ï¼‰
// - éœ€è¦ç±»å‹å®‰å…¨ï¼ˆå¦‚ UserID vs PostIDï¼‰
// - æœ‰ä¸å˜æ€§è¦æ±‚
//
// âŒ ä¸åº”è¯¥å®šä¹‰å€¼å¯¹è±¡çš„æƒ…å†µï¼š
// - åªæ˜¯ç®€å•çš„å­—ç¬¦ä¸²ï¼Œæ²¡æœ‰éªŒè¯è§„åˆ™
// - åªéœ€è¦å”¯ä¸€æ€§çº¦æŸï¼ˆè¿™æ˜¯ä»“å‚¨å±‚çš„èŒè´£ï¼‰
// - éªŒè¯é€»è¾‘ä¾èµ–å¤–éƒ¨çŠ¶æ€ï¼ˆæ•°æ®åº“ã€å…¶ä»–æœåŠ¡ï¼‰
//
// ğŸ¤” åˆ¤æ–­æ ‡å‡†ï¼š
// é—®è‡ªå·±ï¼š"è¿™ä¸ªéªŒè¯è§„åˆ™å¯ä»¥åœ¨ä¸è®¿é—®æ•°æ®åº“çš„æƒ…å†µä¸‹å®Œæˆå—ï¼Ÿ"
// - å¯ä»¥ â†’ æ”¾åœ¨å€¼å¯¹è±¡ä¸­ âœ…
// - ä¸å¯ä»¥ â†’ æ”¾åœ¨é¢†åŸŸæœåŠ¡æˆ–ä»“å‚¨ä¸­ âœ…

// ============================================================
// å®é™…ä»£ç ç¤ºä¾‹ï¼šå®Œæ•´çš„ç”¨æˆ·åˆ›å»ºæµç¨‹
// ============================================================

// å‡è®¾æˆ‘ä»¬æœ‰è¿™æ ·çš„éœ€æ±‚ï¼š
// - æ˜µç§°ï¼š3-16ä¸ªå­—ç¬¦ï¼Œåªèƒ½æ˜¯ä¸­æ–‡/è‹±æ–‡/æ•°å­—ï¼Œå¿…é¡»å”¯ä¸€
// - é‚®ç®±ï¼šå¿…é¡»æ˜¯åˆæ³•çš„é‚®ç®±æ ¼å¼ï¼Œå¿…é¡»å”¯ä¸€

// 1. å®šä¹‰å€¼å¯¹è±¡ï¼ˆè´Ÿè´£æ ¼å¼éªŒè¯ï¼‰
// type Nickname struct { value string }
// type Email struct { value string }

// 2. å®šä¹‰é¢†åŸŸæœåŠ¡ï¼ˆè´Ÿè´£å”¯ä¸€æ€§éªŒè¯ï¼‰
// type UserService struct {
//     userRepo UserRepository
// }
//
// func (s *UserService) RegisterUser(nicknameStr string, emailStr string) (*User, error) {
//     // æ­¥éª¤1ï¼šæ ¼å¼éªŒè¯ï¼ˆå€¼å¯¹è±¡è´Ÿè´£ï¼‰
//     nickname, err := NewNickname(nicknameStr)
//     if err != nil {
//         return nil, fmt.Errorf("æ˜µç§°æ ¼å¼ä¸åˆæ³•: %w", err)
//     }
//
//     email, err := NewEmail(emailStr)
//     if err != nil {
//         return nil, fmt.Errorf("é‚®ç®±æ ¼å¼ä¸åˆæ³•: %w", err)
//     }
//
//     // æ­¥éª¤2ï¼šå”¯ä¸€æ€§éªŒè¯ï¼ˆé¢†åŸŸæœåŠ¡è´Ÿè´£ï¼‰
//     if exists, _ := s.userRepo.ExistsByNickname(nickname.Value()); exists {
//         return nil, errors.New("æ˜µç§°å·²è¢«ä½¿ç”¨")
//     }
//
//     if exists, _ := s.userRepo.ExistsByEmail(email.Value()); exists {
//         return nil, errors.New("é‚®ç®±å·²è¢«æ³¨å†Œ")
//     }
//
//     // æ­¥éª¤3ï¼šåˆ›å»ºç”¨æˆ·
//     user := NewUser(nickname, email)
//     return user, s.userRepo.Save(user)
// }

// ============================================================
// ä¸ºä»€ä¹ˆè¦è¿™æ ·åˆ†å±‚ï¼Ÿ
// ============================================================
//
// 1. å•ä¸€èŒè´£åŸåˆ™
//    - å€¼å¯¹è±¡ï¼šè´Ÿè´£è‡ªèº«çš„æœ‰æ•ˆæ€§
//    - é¢†åŸŸæœåŠ¡ï¼šè´Ÿè´£ä¸šåŠ¡è§„åˆ™å’Œå¯¹è±¡é—´çš„å…³ç³»
//    - ä»“å‚¨ï¼šè´Ÿè´£æ•°æ®æŒä¹…åŒ–
//
// 2. å¯æµ‹è¯•æ€§
//    - å€¼å¯¹è±¡çš„æµ‹è¯•ä¸éœ€è¦æ•°æ®åº“
//    - é¢†åŸŸæœåŠ¡çš„æµ‹è¯•å¯ä»¥ mock ä»“å‚¨
//
// 3. æ€§èƒ½
//    - æ ¼å¼éªŒè¯åœ¨å†…å­˜ä¸­å®Œæˆï¼Œå¿«é€Ÿå¤±è´¥
//    - åªæœ‰æ ¼å¼æ­£ç¡®çš„æ•°æ®æ‰ä¼šæŸ¥è¯¢æ•°æ®åº“
//
// 4. å¯ç»´æŠ¤æ€§
//    - ä¿®æ”¹æ ¼å¼è§„åˆ™åªéœ€æ”¹å€¼å¯¹è±¡
//    - ä¿®æ”¹å”¯ä¸€æ€§éªŒè¯é€»è¾‘åªéœ€æ”¹é¢†åŸŸæœåŠ¡
//    - èŒè´£æ¸…æ™°ï¼Œä¸ä¼šæ··ä¹±
