// Code generated by Wire. DO NOT EDIT.

//go:generate go run github.com/google/wire/cmd/wire
//go:build !wireinject
// +build !wireinject

package main

import (
	"service/application/service"
	domainService "service/domain/service"
	"service/infrastructure/repository"
	"service/interface/handler"
)

// wire_gen.go.example - Wire 生成代码示例
//
// 这是 Wire 自动生成的代码示例。
// 实际使用时，运行 `wire` 命令会生成 wire_gen.go 文件。
//
// 生成步骤：
// 1. 安装 Wire：go install github.com/google/wire/cmd/wire@latest
// 2. 运行 Wire：wire
// 3. Wire 会分析 wire.go 中的 Provider 和 Injector
// 4. 自动生成这个文件（wire_gen.go）
//
// 注意：
// - 这个文件是自动生成的，不要手动编辑
// - 如果修改了 wire.go，需要重新运行 wire 命令
// - 生成的代码是普通 Go 代码，可读性强

// InitializeRecommendationHandler 初始化推荐 Handler
//
// 这个函数由 Wire 自动生成，实现了完整的依赖注入流程。
//
// Wire 做了什么？
// 1. 分析 wire.go 中的依赖关系
// 2. 计算正确的依赖顺序
// 3. 生成创建和注入代码
//
// 依赖链：
// RecommendationHandler
//   ↓ 依赖
// RecommendationService
//   ↓ 依赖
// RecommendationGenerator + SocialGraphRepo + ContentRepo + ContentClient + UserRPCClient + ReasonConfigClient
//   ↓ 依赖
// 基础设施（RPC 客户端、数据库等）
//
// 对比手动方式：
// - 手动方式：需要自己写这 50 行代码
// - Wire 方式：自动生成，保证正确性
func InitializeRecommendationHandler() *handler.RecommendationHandler {
	// 1. 基础设施层
	// 调用 wire.go 中定义的 Provider 函数
	userRPCClient := provideUserRPCClient()
	contentServiceClient := provideContentServiceClient()
	reasonTextConfigClient := provideReasonConfigClient()

	// 2. 仓储层
	// 调用 wire.go 中定义的 Provider 函数
	socialGraphRepository := provideSocialGraphRepository()
	contentRepository := provideContentRepository()

	// 3. 领域服务层
	// 调用领域服务的构造函数，传入依赖
	recommendationGenerator := domainService.NewRecommendationGenerator(
		socialGraphRepository,
		contentRepository,
	)

	// 4. 应用服务层
	// 调用应用服务的构造函数，传入所有依赖
	recommendationService := service.NewRecommendationService(
		recommendationGenerator,
		socialGraphRepository,
		contentRepository,
		contentServiceClient,
		userRPCClient,
		reasonTextConfigClient,
	)

	// 5. 接口层
	// 调用 Handler 的构造函数，传入应用服务
	recommendationHandler := handler.NewRecommendationHandler(
		recommendationService,
	)

	// 6. 返回最终对象
	return recommendationHandler
}

// Wire 生成代码的特点：
//
// 1. 可读性强
//    生成的代码就是普通的 Go 代码，容易理解
//
// 2. 无反射
//    不使用反射，性能好，启动快
//
// 3. 编译时检查
//    如果依赖缺失或类型不匹配，编译时就会报错
//
// 4. 自动优化
//    Wire 会自动优化依赖顺序，避免重复创建
//
// 5. 支持清理
//    如果 Provider 返回清理函数，Wire 会自动处理
//
// 实际使用：
// 1. 定义 wire.go（Provider 和 Injector）
// 2. 运行 wire 命令
// 3. Wire 生成 wire_gen.go（类似这个文件）
// 4. 在 main.go 中使用 InitializeRecommendationHandler()
//
// 如果修改了依赖：
// 1. 修改 wire.go（添加/删除 Provider）
// 2. 重新运行 wire 命令
// 3. Wire 自动更新 wire_gen.go
// 4. 不需要修改 main.go
